# 享阅·阅读器开发文档

## 功能和实现

### 响应式
1. `App.vue`监测`body`宽高，`book.vue`根据宽高响应
2. 高度小于`600`或者宽度小于`400`为全屏、单页
3. 宽高比大于`1`，双页，反之单页

### 菜单
1. 菜单从左上向下排列，标签式，外延`20px`

### 中文排版
1. `\t`制表符在字符测量阶段处理，宽度为参照字符的两倍
2. 换行符`\r,\n,\r\n`需要换行，换行字符属于当前行
3. 行尾前置字符提前换行，回溯字符数`n`，`n`小于等于`0`不回溯。回溯字符数以内遇到非前置字符，非前置字符后提前换行，否则不换行。前置字符后面为换行符，不提前换行
4. 行首后置字符回溯换行，回溯字符数`n+1`，`n`小于等于`0`回溯一个字符。回溯字符数以内遇到非后置字符，非后置字符提前换行，否则不回溯换行。因为回溯换行导致上一行出现行尾前置字符的情况不做处理
5. 行首后置字符回溯注意，如果上一行是换行符结尾，不回溯。
6. 其余字符处理

### 错误码
|错误码|相关功能|说明|
|---|---|---|
|r101|获取缓存书籍信息|getBookInfo函数|
|r201|通过postMessage传过来的文本地址获取文本失败|dealPostMessage函数|
|r202|将当前阅读书籍进度发送到postMessage指定地址失败|savePercentOnline函数|
|r202|将当前阅读书籍进度发送到postMessage指定地址成功，但后端处理失败|savePercentOnline函数|